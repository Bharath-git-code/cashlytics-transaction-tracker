<!DOCTYPE html>
<html>
<head>
    <title>Cashlytics APK Builder Instructions</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .cell { border: 1px solid #ddd; margin: 10px 0; padding: 15px; border-radius: 5px; }
        .cell-title { background: #f5f5f5; font-weight: bold; margin: -15px -15px 10px -15px; padding: 10px 15px; }
        code { background: #f8f8f8; padding: 2px 4px; border-radius: 3px; }
        .code-block { background: #f8f8f8; padding: 15px; border-radius: 5px; white-space: pre-wrap; font-family: monospace; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>ğŸš€ Cashlytics APK Builder - Google Colab Instructions</h1>
    
    <h2>Step-by-Step Process:</h2>
    <ol>
        <li>Go to <strong>colab.research.google.com</strong></li>
        <li>Create a <strong>New Notebook</strong></li>
        <li>Copy each code block below into separate cells</li>
        <li>Run cells one by one (click â–¶ï¸ button)</li>
        <li>Wait for your APK to download!</li>
    </ol>

    <div class="cell">
        <div class="cell-title">ğŸ“¦ CELL 1: Setup Environment</div>
        <div class="code-block">print("ğŸ”„ Setting up build environment...")

# Install system dependencies
!apt-get update -qq
!apt-get install -y -qq openjdk-8-jdk git zip unzip autoconf libtool pkg-config zlib1g-dev libncurses5-dev libncursesw5-dev libtinfo5 cmake libffi-dev libssl-dev

# Set Java 8 as default
import os
os.environ['JAVA_HOME'] = '/usr/lib/jvm/java-8-openjdk-amd64'
os.environ['PATH'] = f"/usr/lib/jvm/java-8-openjdk-amd64/bin:{os.environ['PATH']}"

# Install Python build tools
!pip install -q cython==0.29.36 buildozer==1.5.0 colorama

print("âœ… Build environment ready!")</div>
    </div>

    <div class="cell">
        <div class="cell-title">ğŸ“¥ CELL 2: Download Project</div>
        <div class="code-block">print("ğŸ“¥ Downloading your project...")

# Clone the repository
!git clone https://github.com/Bharath-git-code/cashlytics-transaction-tracker.git
%cd cashlytics-transaction-tracker

print("âœ… Project downloaded!")</div>
    </div>

    <div class="cell">
        <div class="cell-title">ğŸ”§ CELL 3: Configure Android</div>
        <div class="code-block">print("ğŸ”§ Configuring Android SDK...")

# Create Android licenses directory and accept licenses
!mkdir -p /root/.android/licenses
!echo "8933bad161af4178b1185d1a37fbf41ea5269c55" > /root/.android/licenses/android-sdk-license
!echo "d56f5187479451eabf01fb78af6dfcb131a6481e" >> /root/.android/licenses/android-sdk-license
!echo "24333f8a63b6825ea9c5514f83c2829b004d1fee" >> /root/.android/licenses/android-sdk-license
!echo "d975f751698a77b662f1254ddbeed3901e976f5a" > /root/.android/licenses/google-gdk-license

print("âœ… Android licenses configured!")</div>
    </div>

    <div class="cell">
        <div class="cell-title">ğŸ“‹ CELL 4: Prepare Build</div>
        <div class="code-block">print("ğŸ“‹ Preparing build configuration...")

# Use stable config and clean previous builds
!cp buildozer-stable.spec buildozer.spec
!rm -rf .buildozer bin

print("âœ… Configuration ready!")</div>
    </div>

    <div class="cell">
        <div class="cell-title">ğŸš€ CELL 5: Build APK (10-15 minutes)</div>
        <div class="code-block">print("ğŸš€ Building your APK...")
print("â° This takes 10-15 minutes - please wait!")

# Set environment and build
import os
os.environ['BUILDOZER_LOG_LEVEL'] = '1'
os.environ['JAVA_HOME'] = '/usr/lib/jvm/java-8-openjdk-amd64'

!buildozer android debug

print("ğŸ‰ Build completed!")</div>
    </div>

    <div class="cell">
        <div class="cell-title">ğŸ“± CELL 6: Download APK</div>
        <div class="code-block">print("ğŸ” Finding your APK...")

import os
from google.colab import files

# Find and download APK
for root, dirs, filenames in os.walk('.'):
    for filename in filenames:
        if filename.endswith('.apk'):
            apk_path = os.path.join(root, filename)
            print(f"ğŸ“± Found: {filename}")
            
            # Copy to simple name and download
            !cp "{apk_path}" "cashlytics-app.apk"
            files.download("cashlytics-app.apk")
            print("âœ… APK downloaded!")
            break</div>
    </div>

    <h2>ğŸ¯ Expected Results:</h2>
    <ul>
        <li><strong>File:</strong> cashlytics-app.apk (~20MB)</li>
        <li><strong>Time:</strong> 15-20 minutes total</li>
        <li><strong>Ready to install</strong> on Android devices!</li>
    </ul>

    <h2>âš ï¸ Troubleshooting:</h2>
    <ul>
        <li>If a cell fails, just run it again</li>
        <li>Make sure to wait for each cell to complete before running the next</li>
        <li>The build process is verbose - lots of output is normal</li>
    </ul>
</body>
</html>